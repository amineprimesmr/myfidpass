<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Fidpass ‚Äî Carte de fid√©lit√© Apple Wallet et Google Wallet pour votre commerce. Fid√©lisez vos clients en 3 secondes. Tous t√©l√©phones. Sans carte en plastique." />
    <meta name="theme-color" content="#0a7c42" />
    <title>Fidpass ‚Äî Carte fid√©lit√© Apple Wallet & Google Wallet pour les commerces</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/src/style.css" />
    <link rel="stylesheet" href="/src/landing.css" />
    <link rel="stylesheet" href="/src/dashboard.css" />
    <link rel="stylesheet" href="/src/auth.css" />
    <link rel="stylesheet" href="/src/app.css" />
  </head>
  <body>
    <!-- Banni√®re promo (toutes les pages) -->
    <div class="site-banner">
      <p class="site-banner-text">Essayez Fidpass GRATUITEMENT aujourd'hui <a href="/creer-ma-carte" class="site-banner-link">Rejoindre</a></p>
    </div>
    <!-- Auth : connexion / inscription (visible sur /login, /register) -->
    <div id="auth-app" class="hidden">
      <div class="auth-container">
        <a href="/" class="auth-logo">Fidpass</a>
        <div id="auth-tabs" class="auth-tabs">
          <button type="button" class="auth-tab active" data-tab="login">Connexion</button>
          <button type="button" class="auth-tab" data-tab="register">Cr√©er un compte</button>
        </div>
        <div id="auth-form-login" class="auth-form-block">
          <h1 class="auth-title">Connexion</h1>
          <form id="auth-login-form" class="auth-form">
            <label class="auth-label">Email</label>
            <input type="email" id="auth-login-email" class="auth-input" placeholder="vous@exemple.fr" required autocomplete="email" />
            <label class="auth-label">Mot de passe</label>
            <input type="password" id="auth-login-password" class="auth-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="current-password" />
            <p id="auth-login-error" class="auth-error hidden"></p>
            <button type="submit" class="landing-btn landing-btn-primary landing-btn-block">Se connecter</button>
          </form>
        </div>
        <div id="auth-form-register" class="auth-form-block hidden">
          <h1 class="auth-title">Cr√©er un compte</h1>
          <form id="auth-register-form" class="auth-form">
            <label class="auth-label">Nom (optionnel)</label>
            <input type="text" id="auth-register-name" class="auth-input" placeholder="Votre nom ou √©tablissement" autocomplete="name" />
            <label class="auth-label">Email</label>
            <input type="email" id="auth-register-email" class="auth-input" placeholder="vous@exemple.fr" required autocomplete="email" />
            <label class="auth-label">Mot de passe (8 caract√®res min.)</label>
            <input type="password" id="auth-register-password" class="auth-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="new-password" minlength="8" />
            <p id="auth-register-error" class="auth-error hidden"></p>
            <button type="submit" class="landing-btn landing-btn-primary landing-btn-block">Cr√©er mon compte</button>
          </form>
        </div>
        <p class="auth-footer"><a href="/">‚Üê Retour √† l'accueil</a></p>
      </div>
    </div>

    <!-- Choisir une offre (visible sur /choisir-offre, compte requis) -->
    <div id="offers-app" class="hidden offers-page">
      <header class="offers-header">
        <a href="/" class="offers-logo">Fidpass</a>
        <a href="/app" class="offers-back">‚Üê Mon espace</a>
      </header>
      <main class="offers-main">
        <h1 class="offers-title">Choisissez votre offre</h1>
        <p class="offers-subtitle">Acc√©dez √† votre espace et cr√©ez vos cartes fid√©lit√© (Apple Wallet et Google Wallet).</p>
        <div class="offers-grid" id="offers-grid">
          <article class="offers-card offers-card-featured">
            <h2 class="offers-card-title">Starter</h2>
            <p class="offers-card-desc">1 carte de fid√©lit√©, tableau de bord, QR code illimit√©.</p>
            <p class="offers-card-price"><span class="offers-card-amount">9 ‚Ç¨</span> / mois</p>
            <a href="/app" class="landing-btn landing-btn-primary landing-btn-block" id="offers-btn-starter">Acc√©der √† mon espace</a>
          </article>
          <article class="offers-card">
            <h2 class="offers-card-title">Pro</h2>
            <p class="offers-card-desc">Jusqu'√† 5 cartes, id√©al pour plusieurs √©tablissements.</p>
            <p class="offers-card-price"><span class="offers-card-amount">19 ‚Ç¨</span> / mois</p>
            <button type="button" class="landing-btn landing-btn-secondary landing-btn-block" disabled>Bient√¥t disponible</button>
          </article>
        </div>
        <p class="offers-footer"><a href="/app">J'ai d√©j√† un abonnement ‚Üí aller √† mon espace</a></p>
      </main>
    </div>

    <!-- App connect√©e (visible sur /app) -->
    <div id="app-app" class="hidden">
      <aside class="app-sidebar" id="app-sidebar">
        <div class="app-sidebar-brand">
          <a href="/" class="app-sidebar-logo">Fidpass</a>
          <p class="app-sidebar-business" id="app-business-name">Mon espace</p>
        </div>
        <nav class="app-sidebar-nav" aria-label="Navigation principale">
          <a href="#vue-ensemble" class="app-sidebar-link app-sidebar-link-active" data-section="vue-ensemble">
            <span class="app-sidebar-icon" aria-hidden="true">üìä</span>
            Vue d'ensemble
          </a>
          <a href="#partager" class="app-sidebar-link" data-section="partager">
            <span class="app-sidebar-icon" aria-hidden="true">üîó</span>
            Partager
          </a>
          <a href="#scanner" class="app-sidebar-link" data-section="scanner">
            <span class="app-sidebar-icon" aria-hidden="true">üì∑</span>
            Scanner carte
          </a>
          <a href="#caisse" class="app-sidebar-link" data-section="caisse">
            <span class="app-sidebar-icon" aria-hidden="true">‚ûï</span>
            Caisse rapide
          </a>
          <a href="#membres" class="app-sidebar-link" data-section="membres">
            <span class="app-sidebar-icon" aria-hidden="true">üë•</span>
            Membres
          </a>
          <a href="#historique" class="app-sidebar-link" data-section="historique">
            <span class="app-sidebar-icon" aria-hidden="true">üìã</span>
            Historique
          </a>
        </nav>
        <div class="app-sidebar-footer">
          <a href="/creer-ma-carte" class="app-sidebar-link app-sidebar-link-cta">Cr√©er une carte</a>
          <p class="app-sidebar-user" id="app-user-email"></p>
          <button type="button" id="app-logout" class="app-sidebar-logout">D√©connexion</button>
          <button type="button" id="app-reset-all" class="app-sidebar-reset" title="Supprime tous les comptes et cartes (dev)">Reset tout (dev)</button>
        </div>
      </aside>
      <main class="app-main">
        <div id="app-empty" class="app-empty hidden">
          <div class="app-empty-card">
            <h1 class="app-empty-title">Aucune carte pour l'instant</h1>
            <p class="app-empty-text">Cr√©ez votre premi√®re carte de fid√©lit√© (Apple Wallet et Google Wallet). Vous pourrez ensuite enregistrer les passages et voir vos clients ici.</p>
            <a href="/creer-ma-carte" class="app-btn app-btn-primary app-empty-cta">Cr√©er ma premi√®re carte</a>
          </div>
        </div>
        <div id="app-dashboard-content" class="app-content hidden">
          <section id="vue-ensemble" class="app-section app-section-overview">
            <h1 class="app-section-title">Vue d'ensemble</h1>
            <p class="app-section-desc">Vos chiffres du mois en un coup d'≈ìil.</p>
            <div class="app-stats">
              <div class="app-stat">
                <span class="app-stat-value" id="app-stat-members">0</span>
                <span class="app-stat-label">Membres inscrits</span>
              </div>
              <div class="app-stat">
                <span class="app-stat-value" id="app-stat-points">0</span>
                <span class="app-stat-label">Points distribu√©s ce mois</span>
              </div>
              <div class="app-stat">
                <span class="app-stat-value" id="app-stat-transactions">0</span>
                <span class="app-stat-label">Op√©rations ce mois</span>
              </div>
            </div>
          </section>

          <section id="partager" class="app-section">
            <h2 class="app-section-title">Partager votre carte</h2>
            <p class="app-section-desc">Partagez ce lien ou le QR code √† vos clients pour qu'ils ajoutent la carte √† leur t√©l√©phone (en caisse, sur votre vitrine ou en fin de commande).</p>
            <div class="app-card app-share-card">
              <p class="app-step-label">Lien √† partager</p>
              <div class="app-share-row">
                <input type="text" id="app-share-link" class="app-input app-share-input" readonly aria-label="Lien de la page carte" />
                <button type="button" id="app-share-copy" class="app-btn app-btn-primary">Copier</button>
              </div>
              <p class="app-step-label">QR code √† afficher ou imprimer</p>
              <div class="app-qr-wrap">
                <img id="app-share-qr" class="app-qr-img" src="" alt="QR code vers la page carte" />
              </div>
            </div>
          </section>

          <section id="scanner" class="app-section app-section-scanner">
            <h2 class="app-section-title">Scanner la carte client</h2>
            <p class="app-section-desc">Cadrez le code-barres de la carte (Wallet ou √©cran du client). Reconnaissance imm√©diate du client et ajout des points en un clic.</p>
            <div class="app-card app-scanner-card" id="app-scanner-card">
              <div id="app-scanner-viewport" class="app-scanner-viewport">
                <div id="app-scanner-placeholder" class="app-scanner-placeholder">
                  <p>Vue cam√©ra</p>
                  <p class="app-scanner-hint">Autorisez l‚Äôacc√®s √† la cam√©ra pour scanner.</p>
                </div>
              </div>
              <!-- √âtat : v√©rification en cours -->
              <div id="app-scanner-verifying" class="app-scanner-state app-scanner-verifying hidden" aria-live="polite" aria-atomic="true">
                <div class="app-scanner-state-icon app-scanner-spinner" aria-hidden="true"></div>
                <p class="app-scanner-state-title">V√©rification du code‚Ä¶</p>
                <p class="app-scanner-state-desc">Nous v√©rifions que la carte correspond √† un client de votre commerce.</p>
              </div>
              <!-- √âtat : rejet (mauvais code / autre commerce) -->
              <div id="app-scanner-reject" class="app-scanner-state app-scanner-reject hidden" aria-live="assertive" aria-atomic="true">
                <div class="app-scanner-state-icon app-scanner-icon-reject" aria-hidden="true">‚úï</div>
                <p class="app-scanner-state-title">Code non reconnu</p>
                <p id="app-scanner-reject-message" class="app-scanner-state-desc">Ce code-barres ne correspond pas √† un client de votre commerce.</p>
                <button type="button" id="app-scanner-retry" class="app-btn app-btn-primary">R√©essayer</button>
              </div>
              <!-- √âtat : succ√®s (client trouv√©) -->
              <div id="app-scanner-result" class="app-scanner-state app-scanner-result hidden" aria-live="polite" aria-atomic="true">
                <div class="app-scanner-state-icon app-scanner-icon-ok" aria-hidden="true">‚úì</div>
                <p class="app-scanner-result-label">Client reconnu</p>
                <div class="app-scanner-client-card">
                  <p class="app-scanner-client-name" id="app-scanner-result-name"></p>
                  <p class="app-scanner-client-email" id="app-scanner-result-email"></p>
                  <p class="app-scanner-client-points" id="app-scanner-result-points"></p>
                  <p class="app-scanner-client-last-visit" id="app-scanner-result-last-visit"></p>
                  <div class="app-scanner-history" id="app-scanner-history">
                    <p class="app-scanner-history-title">Derni√®res op√©rations</p>
                    <ul class="app-scanner-history-list" id="app-scanner-history-list"></ul>
                  </div>
                </div>
                <div class="app-scanner-actions">
                  <button type="button" id="app-scanner-one-visit" class="app-btn app-btn-primary">1 passage</button>
                  <div class="app-scanner-amount-row">
                    <input type="number" id="app-scanner-amount" class="app-input app-input-amount" placeholder="Montant (‚Ç¨)" min="0" step="0.01" />
                    <button type="button" id="app-scanner-add-points" class="app-btn app-btn-primary">Ajouter les points</button>
                  </div>
                  <button type="button" id="app-scanner-resume" class="app-btn app-btn-secondary">Scanner un autre</button>
                </div>
                <p id="app-scanner-result-message" class="app-message hidden"></p>
              </div>
            </div>
          </section>

          <section id="caisse" class="app-section app-section-caisse">
            <h2 class="app-section-title">Caisse rapide</h2>
            <p class="app-section-desc">Enregistrer un achat ou un passage : cherchez le client, saisissez le montant ou ¬´ 1 passage ¬ª, puis validez.</p>
            <div class="app-card">
              <p class="app-step-label">1. Rechercher le client</p>
              <input type="text" id="app-member-search" class="app-input" placeholder="Nom ou email du client..." autocomplete="off" />
              <div id="app-member-list" class="app-member-list hidden"></div>
              <p class="app-step-label">2. Montant ou passage</p>
              <div class="app-caisse-row">
                <input type="number" id="app-amount" class="app-input app-input-amount" placeholder="Montant (‚Ç¨)" min="0" step="0.01" aria-label="Montant en euros" />
                <button type="button" id="app-one-visit" class="app-btn app-btn-secondary">1 passage</button>
                <button type="button" id="app-add-points" class="app-btn app-btn-primary" disabled>Ajouter les points</button>
              </div>
              <p id="app-caisse-message" class="app-message hidden"></p>
            </div>
          </section>

          <section id="membres" class="app-section">
            <h2 class="app-section-title">Membres</h2>
            <p class="app-section-desc">Liste des clients qui ont ajout√© votre carte √† leur t√©l√©phone.</p>
            <div class="app-card">
              <input type="text" id="app-members-search" class="app-input app-search" placeholder="Rechercher par nom ou email..." aria-label="Rechercher un membre" />
              <div class="app-table-wrap">
                <table class="app-table">
                  <thead><tr><th>Nom</th><th>Email</th><th>Points</th><th>Derni√®re visite</th></tr></thead>
                  <tbody id="app-members-tbody"></tbody>
                </table>
              </div>
            </div>
          </section>

          <section id="historique" class="app-section">
            <h2 class="app-section-title">Historique</h2>
            <p class="app-section-desc">Derniers points ajout√©s (achats ou passages enregistr√©s).</p>
            <div class="app-card">
              <div class="app-table-wrap">
                <table class="app-table">
                  <thead><tr><th>Client</th><th>Type</th><th>Points</th><th>Date</th></tr></thead>
                  <tbody id="app-transactions-tbody"></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Landing Fidpass (visible sur /) -->
    <div id="landing">
      <header class="landing-header">
        <div class="landing-header-inner">
          <button type="button" class="landing-menu-toggle" id="landing-menu-toggle" aria-label="Ouvrir le menu" aria-expanded="false">
            <span class="landing-menu-toggle-bar"></span>
            <span class="landing-menu-toggle-bar"></span>
            <span class="landing-menu-toggle-bar"></span>
          </button>
          <a href="/" class="landing-logo"><img src="/assets/logo.png" alt="Fidpass" class="landing-logo-img"></a>
          <nav class="landing-nav landing-nav-desk">
            <a href="#comment-ca-marche">Comment √ßa marche</a>
            <a href="#produit">Offre</a>
            <a href="#faq">FAQ</a>
            <a href="#contact">Contact</a>
            <a href="/login" class="landing-nav-login">Connexion</a>
          </nav>
          <a href="/creer-ma-carte" class="landing-cta landing-cta-desk">Obtenir ma carte</a>
        </div>
      </header>

      <!-- Menu mobile (drawer style WHOOP) -->
      <div class="landing-menu-overlay" id="landing-menu-overlay" aria-hidden="true">
        <div class="landing-menu-drawer">
          <div class="landing-menu-drawer-header">
            <button type="button" class="landing-menu-close" id="landing-menu-close" aria-label="Fermer le menu">
              <span aria-hidden="true">√ó</span>
            </button>
            <a href="/" class="landing-menu-drawer-logo"><img src="/assets/logo.png" alt="Fidpass" class="landing-logo-img"></a>
          </div>
          <nav class="landing-menu-drawer-nav">
            <a href="#comment-ca-marche">Comment √ßa marche</a>
            <a href="#produit">Offre</a>
            <a href="#faq">FAQ</a>
            <a href="#contact">Contact</a>
            <a href="/login">Connexion</a>
            <a href="/creer-ma-carte" class="landing-menu-drawer-cta">Obtenir ma carte</a>
          </nav>
        </div>
      </div>

      <!-- Vid√©o banni√®re (juste sous le menu) -->
      <div class="site-banner-media" id="site-banner-media">
        <img src="/assets/banner/hero.jpg" alt="" class="site-banner-media-img" onerror="this.style.display='none'">
        <video class="site-banner-media-video" src="/assets/banner/hero.mp4" autoplay muted loop playsinline preload="auto" onloadeddata="var i=document.getElementById('site-banner-media').querySelector('.site-banner-media-img'); if(i) i.style.display='none';">
        </video>
      </div>

      <main id="landing-main" class="landing-main">
        <section class="landing-hero">
          <h1 class="landing-hero-title">Le meilleur moyen de <strong>fid√©liser vos clients</strong></h1>
          <p class="landing-hero-subtitle">Carte de fid√©lit√© dans <strong>Apple Wallet</strong> ou <strong>Google Wallet</strong>. Sur le t√©l√©phone, toujours √† port√©e de main. Z√©ro carte en plastique.</p>
          <form id="landing-hero-form" class="landing-hero-form">
            <div class="landing-hero-input-wrap">
              <img src="/assets/googlelogo.png" alt="Google" class="landing-hero-google-logo" width="32" height="32" />
              <input type="text" id="landing-etablissement" class="landing-hero-input" placeholder="Nom de votre √©tablissement" autocomplete="organization" />
            </div>
            <div class="landing-hero-cta">
              <button type="submit" class="landing-btn landing-btn-primary">Cr√©er ma carte ‚Äî Gratuit</button>
            </div>
          </form>
          <p class="landing-hero-stats">‚òÖ Adopt√© par des commerces en France</p>
        </section>

        <section class="landing-value">
          <h2 class="landing-section-title">Obtenez une carte fid√©lit√© en <strong>3 secondes</strong></h2>
          <p class="landing-section-subtitle">Vos clients scannent un QR ou ouvrent un lien, ajoutent la carte √† leur t√©l√©phone (Apple Wallet ou Google Wallet). C‚Äôest tout.</p>
        </section>

        <section id="comment-ca-marche" class="landing-steps">
          <h2 class="landing-section-title">Comment √ßa marche</h2>
          <ol class="landing-steps-list">
            <li>
              <span class="landing-steps-num">1</span>
              <div>
                <h3>Nous cr√©ons votre carte</h3>
                <p>Vous nous donnez le nom de votre commerce. Nous g√©n√©rons votre carte fid√©lit√© et votre lien unique (ou QR code).</p>
              </div>
            </li>
            <li>
              <span class="landing-steps-num">2</span>
              <div>
                <h3>Vous diffusez le lien</h3>
                <p>Affichage en caisse, sur votre vitrine, ou en fin de commande. Vos clients cliquent ou scannent.</p>
              </div>
            </li>
            <li>
              <span class="landing-steps-num">3</span>
              <div>
                <h3>Ils l‚Äôajoutent sur leur t√©l√©phone</h3>
                <p>Un clic sur ¬´ Apple Wallet ¬ª ou ¬´ Google Wallet ¬ª. La carte est dans le t√©l√©phone. Ils la pr√©sentent en caisse (code-barres scannable).</p>
              </div>
            </li>
          </ol>
        </section>

        <section id="produit" class="landing-product">
          <h2 class="landing-section-title">Carte fid√©lit√© sur tous les t√©l√©phones</h2>
          <p class="landing-section-subtitle">Doublez la fid√©lit√© de vos clients. Paiement unique, pas d‚Äôabonnement.</p>
          <div class="landing-product-card">
            <div class="landing-product-content">
              <h3>Carte fid√©lit√© Fidpass</h3>
              <ul>
                <li>Lien unique + QR code pour votre commerce</li>
                <li>Carte aux couleurs de votre marque dans Apple Wallet ou Google Wallet</li>
                <li>Points, niveaux, code-barres pour la caisse</li>
                <li>Instantan√© ‚Äî aucun envoi physique</li>
              </ul>
              <a href="/creer-ma-carte" class="landing-btn landing-btn-primary landing-btn-block">Obtenir ma carte</a>
            </div>
          </div>
        </section>

        <section class="landing-guarantee">
          <h2 class="landing-section-title">Garantie satisfait ou rembours√© 30 jours</h2>
          <p>Si la carte ne correspond pas √† vos attentes, nous vous remboursons. Sans condition.</p>
        </section>

        <section id="faq" class="landing-faq">
          <h2 class="landing-section-title">Questions fr√©quentes</h2>
          <div class="landing-faq-list">
            <details class="landing-faq-item">
              <summary>Quel type de t√©l√©phone pour mes clients ?</summary>
              <p>iPhone : carte dans Apple Wallet. Android : carte dans Google Wallet. M√™me code-barres, m√™me scan en caisse. Tous les clients sont couverts.</p>
            </details>
            <details class="landing-faq-item">
              <summary>Comment mes clients ajoutent la carte ?</summary>
              <p>Ils ouvrent le lien que vous leur donnez (ou scannent le QR), renseignent nom et email, puis choisissent ¬´ Apple Wallet ¬ª ou ¬´ Google Wallet ¬ª. La carte s‚Äôajoute en quelques secondes.</p>
            </details>
            <details class="landing-faq-item">
              <summary>C‚Äôest instantan√© ?</summary>
              <p>Oui. D√®s que votre carte est configur√©e, vous recevez un lien. Vous n‚Äôavez rien √† imprimer ni √† livrer : tout est digital.</p>
            </details>
            <details class="landing-faq-item">
              <summary>Puis-je avoir plusieurs commerces ?</summary>
              <p>Oui. Chaque commerce a son propre lien et sa propre carte. Id√©al pour les franchises ou les enseignes √† plusieurs points de vente.</p>
            </details>
          </div>
        </section>

        <section id="contact" class="landing-cta-block">
          <h2 class="landing-section-title">Pr√™t √† fid√©liser ?</h2>
          <p>Obtenez votre carte fid√©lit√© (Apple Wallet ou Google Wallet) en quelques clics.</p>
          <a href="/creer-ma-carte" class="landing-btn landing-btn-primary landing-btn-large">Cr√©er ma carte</a>
        </section>

        <footer class="landing-footer">
          <div class="landing-footer-inner">
            <div class="landing-footer-brand">Fidpass</div>
            <nav class="landing-footer-links">
              <a href="#comment-ca-marche">Comment √ßa marche</a>
              <a href="#produit">Offre</a>
              <a href="#faq">FAQ</a>
              <a href="/mentions-legales">Mentions l√©gales</a>
              <a href="/politique-confidentialite">Politique de confidentialit√©</a>
              <a href="#contact">Contact</a>
            </nav>
            <p class="landing-footer-legal">Fidpass est ind√©pendant et n‚Äôest pas affili√© √† Apple ni Google. Nos cartes utilisent Apple Wallet (iPhone) et Google Wallet (Android) pour une exp√©rience native sur tous les t√©l√©phones.</p>
            <p class="landing-footer-copy">¬© 2026 Fidpass. Tous droits r√©serv√©s.</p>
          </div>
        </footer>
      </main>

      <main id="landing-legal" class="landing-legal hidden">
        <div class="landing-legal-inner">
          <a href="/" class="landing-btn landing-btn-secondary" style="margin-bottom: 1.5rem;">‚Üê Retour</a>
          <div id="landing-legal-content"></div>
        </div>
      </main>

      <!-- Page cr√©ateur de carte (1 template personnalisable) -->
      <main id="landing-templates" class="landing-builder hidden">
        <div class="builder-inner">
          <a href="/" class="builder-back">‚Üê Retour √† l'accueil</a>
          <div class="builder-steps">
            <span class="builder-step active">1. Personnalisez</span>
            <span class="builder-step-sep">‚Üí</span>
            <span class="builder-step" id="builder-step-2">2. Enregistrez</span>
            <span class="builder-step-sep">‚Üí</span>
            <span class="builder-step" id="builder-step-3">3. Partagez</span>
          </div>

          <div id="builder-form-block" class="builder-form-block">
            <h1 class="builder-title">√Ä quoi ressemblera votre carte</h1>
            <p class="builder-subtitle">Modifiez les couleurs, le texte et ajoutez votre logo. La pr√©visualisation se met √† jour en direct.</p>

            <div class="builder-layout">
              <div class="builder-preview-wrap">
                <div class="builder-preview-card" id="builder-preview-card">
                  <div class="builder-preview-header" id="builder-preview-header">
                    <img class="builder-preview-logo" id="builder-preview-logo" src="" alt="" />
                    <span class="builder-preview-org" id="builder-preview-org">Nom du commerce</span>
                  </div>
                  <div class="builder-preview-body" id="builder-preview-body">
                    <div class="builder-preview-primary">
                      <span class="builder-preview-points" id="builder-preview-points">0 pts</span>
                      <span class="builder-preview-points-label">Points</span>
                    </div>
                    <div class="builder-preview-secondary">
                      <span class="builder-preview-label">Niveau</span>
                      <span class="builder-preview-value" id="builder-preview-level">D√©butant</span>
                    </div>
                    <div class="builder-preview-aux">
                      <span class="builder-preview-label">Membre</span>
                      <span class="builder-preview-value">Marie D.</span>
                    </div>
                  </div>
                  <div class="builder-preview-barcode"></div>
                </div>
                <p class="builder-preview-hint">Aper√ßu. La carte r√©elle s‚Äôaffichera dans Apple Wallet ou Google Wallet.</p>
              </div>

              <div class="builder-fields">
                <section class="builder-section">
                  <h2 class="builder-section-title">Identit√©</h2>
                  <label class="builder-label">Nom de l‚Äô√©tablissement</label>
                  <input type="text" id="builder-name" class="builder-input" placeholder="ex. Caf√© NBK" autocomplete="organization" />
                  <label class="builder-label">Votre lien (modifiable)</label>
                  <input type="text" id="builder-slug" class="builder-input builder-input-slug" placeholder="cafe-nbk" />
                  <p class="builder-hint">Vos clients iront sur : ‚Ä¶/fidelity/<strong id="builder-slug-preview">votre-lien</strong></p>
                </section>

                <section class="builder-section">
                  <h2 class="builder-section-title">Couleurs</h2>
                  <div class="builder-colors">
                    <div class="builder-color-row">
                      <label class="builder-label">Fond</label>
                      <input type="color" id="builder-bg" class="builder-color-input" value="#0a7c42" />
                      <input type="text" id="builder-bg-hex" class="builder-input builder-input-hex" value="#0a7c42" maxlength="7" />
                    </div>
                    <div class="builder-color-row">
                      <label class="builder-label">Texte</label>
                      <input type="color" id="builder-fg" class="builder-color-input" value="#ffffff" />
                      <input type="text" id="builder-fg-hex" class="builder-input builder-input-hex" value="#ffffff" maxlength="7" />
                    </div>
                    <div class="builder-color-row">
                      <label class="builder-label">Labels</label>
                      <input type="color" id="builder-label" class="builder-color-input" value="#e8f5e9" />
                      <input type="text" id="builder-label-hex" class="builder-input builder-input-hex" value="#e8f5e9" maxlength="7" />
                    </div>
                  </div>
                </section>

                <section class="builder-section">
                  <h2 class="builder-section-title">Logo</h2>
                  <p class="builder-hint">Recommand√© : 320√ó100 px (PNG ou JPG). Affich√© en haut de la carte.</p>
                  <div class="builder-logo-zone">
                    <input type="file" id="builder-logo" class="builder-file" accept="image/png,image/jpeg,image/jpg" />
                    <label for="builder-logo" class="builder-logo-label">
                      <span class="builder-logo-placeholder" id="builder-logo-placeholder">+ Ajouter un logo</span>
                      <img id="builder-logo-preview" class="builder-logo-preview hidden" alt="" />
                    </label>
                  </div>
                </section>

                <section class="builder-section">
                  <h2 class="builder-section-title">Dos de la carte (optionnel)</h2>
                  <label class="builder-label">Conditions</label>
                  <textarea id="builder-back-terms" class="builder-textarea" placeholder="ex. 1 point = 1 ‚Ç¨ de r√©duction. Valable en magasin." rows="2"></textarea>
                  <label class="builder-label">Contact</label>
                  <input type="text" id="builder-back-contact" class="builder-input" placeholder="contact@votrecommerce.fr" />
                </section>
                <section class="builder-section builder-account-section" id="builder-account-section">
                  <h2 class="builder-section-title">Votre compte</h2>
                  <p class="builder-hint">Cr√©ez un compte pour enregistrer votre carte et acc√©der √† votre tableau de bord.</p>
                  <label class="builder-label">Email</label>
                  <input type="email" id="builder-account-email" class="builder-input" placeholder="vous@exemple.fr" autocomplete="email" />
                  <label class="builder-label">Mot de passe (8 caract√®res minimum)</label>
                  <input type="password" id="builder-account-password" class="builder-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" minlength="8" />
                  <label class="builder-label">Votre nom (optionnel)</label>
                  <input type="text" id="builder-account-name" class="builder-input" placeholder="Pr√©nom ou nom du g√©rant" autocomplete="name" />
                </section>
                <div class="builder-logged-in hidden" id="builder-logged-in">
                  <p class="builder-hint">Connect√©. Votre carte sera enregistr√©e sur votre compte.</p>
                </div>
                <button type="button" id="builder-submit" class="landing-btn landing-btn-primary landing-btn-block landing-btn-large">Cr√©er ma carte et mon compte</button>
              </div>
            </div>
          </div>

          <div id="builder-success-block" class="builder-success-block hidden">
            <div class="builder-success-icon">‚úì</div>
            <h2 class="builder-success-title">Votre carte est pr√™te</h2>
            <p class="builder-success-text">Partagez ce lien √† vos clients pour qu‚Äôils ajoutent la carte √† leur t√©l√©phone (Apple Wallet ou Google Wallet).</p>
            <div class="builder-success-link-wrap">
              <input type="text" id="builder-success-link" class="builder-success-link-input" readonly />
              <button type="button" id="builder-copy-link" class="landing-btn landing-btn-secondary">Copier</button>
            </div>
            <p class="builder-success-qr-label">QR code √† imprimer et afficher en caisse</p>
            <img id="builder-success-qr" class="builder-success-qr" src="" alt="QR code" />
            <a href="#" id="builder-success-page-link" class="landing-btn landing-btn-primary">Voir la page carte</a>
          </div>
        </div>
      </main>
    </div>

    <!-- App Carte Wallet (visible sur /fidelity/:slug) -->
    <div id="fidelity-app" class="hidden fidelity-page">
      <header class="header">
        <div class="header-inner">
          <a href="/" class="logo">Fidpass</a>
        </div>
      </header>
      <main class="main">
        <section class="hero">
          <h1 class="fidelity-title" id="fidelity-title">Carte de fid√©lit√©</h1>
          <p class="fidelity-subtitle" id="fidelity-subtitle">Renseigne ton nom et ton email, puis ajoute la carte √† ton t√©l√©phone.</p>
        </section>
        <section class="card-section">
          <form class="card-form" id="card-form" novalidate>
            <input type="text" id="input-name" class="fidelity-input" placeholder="Ton pr√©nom ou nom" autocomplete="name" required />
            <input type="email" id="input-email" class="fidelity-input" placeholder="ton@email.com" autocomplete="email" required />
            <button type="submit" class="fidelity-btn" id="btn-submit"><span class="fidelity-btn-icon" aria-hidden="true">&#63743;</span> Cr√©er ma carte</button>
            <p id="fidelity-error" class="fidelity-error hidden"></p>
          </form>
          <div id="fidelity-success" class="fidelity-success hidden">
            <p class="fidelity-success-title">Ta carte est pr√™te</p>
            <p class="fidelity-success-desc">Ajoute-la √† ton t√©l√©phone :</p>
            <div class="fidelity-wallet-buttons">
              <a href="#" id="btn-apple-wallet" class="fidelity-btn fidelity-btn-apple"><span class="fidelity-btn-icon" aria-hidden="true">&#63743;</span> Apple Wallet</a>
              <a href="#" id="btn-google-wallet" class="fidelity-btn fidelity-btn-google"><span class="fidelity-btn-icon fidelity-btn-google-icon" aria-hidden="true">G</span> Google Wallet</a>
            </div>
            <p id="fidelity-google-error" class="fidelity-error hidden"></p>
            <button type="button" id="btn-another-card" class="fidelity-link-btn">Cr√©er une autre carte</button>
          </div>
        </section>
      </main>
    </div>

    <!-- Dashboard restaurateur (visible sur /dashboard?slug=xxx&token=xxx) -->
    <div id="dashboard-app" class="hidden">
      <header class="dashboard-header">
        <div class="dashboard-header-inner">
          <a href="/" class="dashboard-logo">Fidpass</a>
          <span class="dashboard-title" id="dashboard-business-name">Tableau de bord</span>
          <a href="/" class="dashboard-back">Retour au site</a>
        </div>
      </header>
      <main class="dashboard-main">
        <div id="dashboard-error" class="dashboard-error hidden">
          <p>Lien invalide ou expir√©. Utilisez le lien re√ßu lors de la cr√©ation de votre carte.</p>
          <a href="/" class="landing-btn landing-btn-secondary">Retour √† l'accueil</a>
        </div>
        <div id="dashboard-content" class="dashboard-content hidden">
          <section class="dashboard-stats">
            <div class="dashboard-stat"><span class="dashboard-stat-value" id="stat-members">0</span><span class="dashboard-stat-label">Membres</span></div>
            <div class="dashboard-stat"><span class="dashboard-stat-value" id="stat-points">0</span><span class="dashboard-stat-label">Points ce mois</span></div>
            <div class="dashboard-stat"><span class="dashboard-stat-value" id="stat-transactions">0</span><span class="dashboard-stat-label">Op√©rations ce mois</span></div>
          </section>

          <section class="dashboard-section">
            <h2 class="dashboard-section-title">Caisse rapide</h2>
            <p class="dashboard-hint">Recherchez un client, puis ajoutez des points (montant en ‚Ç¨ ou 1 passage).</p>
            <div class="dashboard-caisse">
              <input type="text" id="dashboard-member-search" class="dashboard-input" placeholder="Nom ou email du client..." autocomplete="off" />
              <div id="dashboard-member-list" class="dashboard-member-list hidden"></div>
              <div class="dashboard-caisse-row">
                <input type="number" id="dashboard-amount" class="dashboard-input dashboard-input-amount" placeholder="Montant (‚Ç¨)" min="0" step="0.01" />
                <button type="button" id="dashboard-one-visit" class="landing-btn landing-btn-secondary">1 passage</button>
                <button type="button" id="dashboard-add-points" class="landing-btn landing-btn-primary" disabled>Ajouter les points</button>
              </div>
              <p id="dashboard-caisse-message" class="dashboard-message hidden"></p>
            </div>
          </section>

          <section class="dashboard-section">
            <h2 class="dashboard-section-title">Membres</h2>
            <input type="text" id="dashboard-members-search" class="dashboard-input dashboard-search" placeholder="Rechercher par nom ou email..." />
            <div class="dashboard-table-wrap">
              <table class="dashboard-table">
                <thead><tr><th>Nom</th><th>Email</th><th>Points</th><th>Derni√®re visite</th></tr></thead>
                <tbody id="dashboard-members-tbody"></tbody>
              </table>
            </div>
          </section>

          <section class="dashboard-section">
            <h2 class="dashboard-section-title">Derni√®res op√©rations</h2>
            <div class="dashboard-table-wrap">
              <table class="dashboard-table">
                <thead><tr><th>Client</th><th>Type</th><th>Points</th><th>Date</th></tr></thead>
                <tbody id="dashboard-transactions-tbody"></tbody>
              </table>
            </div>
          </section>
        </div>
      </main>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
